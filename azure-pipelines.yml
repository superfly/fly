# Node.js
# Build a general Node.js application with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/vsts/pipelines/languages/javascript

jobs:
- job: macOS
  pool: 
    vmImage: xcode9-macos10.13
  steps:
  - task: NodeTool@0
    inputs: 
      versionSpec: 10.8
  - script: git submodule update --init
  - script: npm install -g yarn
  - script: yarn install
  - script: yarn bootstrap
  - script: yarn build
  - script: yarn bundle
  - script: yarn test
- job: Linux
  pool: 
    vmImage: ubuntu-16.04
  steps:
  - task: NodeTool@0
    inputs: 
      versionSpec: 10.8
  - script: git submodule update --init
  - script: npm install -g yarn
  - script: yarn install
  - script: yarn bootstrap
  - script: yarn build
  - script: yarn bundle
  - script: yarn test
- job: Windows
  pool: 
    vmImage: vs2017-win2016
  steps:
  - task: NodeTool@0
    inputs: 
      versionSpec: 10.8
  - script: git submodule update --init
  # for node-gyp
  - scipt: npm install --global --production windows-build-tools
  - script: npm install -g yarn
  - script: yarn install
  - script: yarn bootstrap
  - script: yarn build
  - script: yarn bundle
  - script: yarn test
